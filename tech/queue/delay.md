## 监控

```sh
./bin/kafka-consumer-groups.sh --bootstrap-server localhost:9092 --describe --group customer-update-group
```

jmx 方式

监控消息
定义一种特殊的消息，然后启动一个监控程序，将这个消息定时地循环写入到消息队列中，消息的内容可以是生成消息的时间戳。业务处理程序消费到这个消息时直接丢弃掉，而监控程序在消费到这个消息时，就可以和这个消息的生成时间做比较，如果时间差达到某一个阈值就可以报警


## 减少延迟
### 消费端
优化消费代码提升性能
增加分区和消费者的数量
使用多线程的方式来增加处理能力

拉取不到消息可以等待一段时间再来拉取，等待的时间不宜过长，否则会增加消息的延迟。一般建议固定的 10ms~100ms。也可以按照一定步长递增，比如第一次拉取不到消息等待 10ms，第二次 20ms，最长可以到 100ms，直到拉取到消息再回到 10ms

### 消息队列本身
消息的存储
零拷贝技术